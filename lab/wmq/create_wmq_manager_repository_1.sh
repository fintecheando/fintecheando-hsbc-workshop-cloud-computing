# Script for creating the main repository of ibm wmq

#Creating QMGR Repository 1
crtmqm -u SYSTEM.TMXREPO01.DEAD.LETTER.QUEUE TMXREPO01

strmqm TMXREPO01
runmqsc TMXREPO01

ALTER QMGR REPOS(TMXCLUS01)

DEFINE CHANNEL(TO.TMXREPO01.TMX01) +
	CHLTYPE(CLUSRCVR) +
	TRPTYPE(TCP) +
	CONNAME('conname(15010)') +
	CLUSTER(TMXCLUS01) +
	DESCR('CLUSRCVR TMXREPO01')
	
DEFINE CHANNEL(TO.TMXREPO02.TMX01) +
	CHLTYPE(CLUSSDR) +
	TRPTYPE(TCP) +
	CONNAME('conname(15020)') +
	CLUSTER(CLUSTERNAME) +
	DESCR('CLUSSDR TMXREPO02')

end


#Creating QMGR Repository 2
crtmqm -u SYSTEM.TMXREPO02.DEAD.LETTER.QUEUE TMXREPO02

strmqm TMXREPO02
runmqsc TMXREPO02

ALTER QMGR REPOS(TMXCLUS01)

DEFINE CHANNEL(TO.TMXREPO02.TMX01) +
	CHLTYPE(CLUSRCVR) +
	TRPTYPE(TCP) +
	CONNAME('conname(15020)') +
	CLUSTER(TMXCLUS01) +
	DESCR('CLUSRCVR TMXREPO02')
	
DEFINE CHANNEL(TO.TMXREPO01.TMX01) +
	CHLTYPE(CLUSSDR) +
	TRPTYPE(TCP) +
	CONNAME('conname(15010)') +
	CLUSTER(CLUSTERNAME) +
	DESCR('CLUSSDR TMXREPO01')

end

#Creating QM in the cluster

crtmqm -u SYSTEM.XXXX.DEAD.LETTER.QUEUE XXXX
strmqm XXXX
runmqsc XXXX

DEFINE CHANNEL(TO.XXXX.TMX01) +
	CHLTYPE(CLUSRCVR) +
	TRPTYPE(TCP) +
	CONNAME('CONNAME()') + 
	CLUSTER(TMX01)

DEFINE CHANNEL(TO.TMXREPO01.TMX01) + 
	CHLTYPE(CLUSSDR) + 
	TRPTYPE(TCP) + 
	CONNAME('CONNAME(16000)') +
	CLUSTER(TMX01)
	
end

#Removing the QM from the cluster

strmqm XXXX
ALTER CHANNEL(TO.XXXX.TMX01) CLUSTER('')
ALTER CHANNEL(TO.TMXREPO01.TMX01) CLUSTER('')

end
